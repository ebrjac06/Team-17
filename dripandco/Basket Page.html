<!--------------------------------------BASKET PAGE START--------------------------------------->
<!DOCTYPE html>
<html lang="en">
<!--------------------------------------Links for Basket Page Start--------------------------------------->
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drip & Co</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="Index.css">
</head>
<!--------------------------------------Links for Basket Page End--------------------------------------->


<body>
<!--------------------------------------Basket Layout Start--------------------------------------->
  <div id="header"></div>
  <div class="basket-container">
    <div class="basket-title">Your Basket</div>
    <div id="basket-items"></div>
    <div class="summary-box">
      <div class="summary-row"> <span>Subtotal:</span> <strong id="subtotal">£0.00</strong> </div>
      <div class="summary-row"> <span>Delivery:</span> <strong>TBD</strong> </div>
      <div class="summary-row"> <span>Total:</span> <strong id="total">£0.00</strong> </div>
      <button class="checkout-btn" onclick="window.location.href='Checkout.html'">Checkout</button>
    </div>
  </div>
  <div id="footer"></div>
<!--------------------------------------Basket Layout End--------------------------------------->

  <script>
/*--------------------------------------Header and Footer Script Start---------------------------------------*/
    fetch("header.html")
      .then(res => res.text())
      .then(data => document.getElementById("header").innerHTML = data);

    fetch("footer.html")
      .then(res => res.text())
      .then(data => document.getElementById("footer").innerHTML = data);
/*--------------------------------------Header and Footer Script End---------------------------------------*/

/*--------------------------------------Basket Java Script Start---------------------------------------*/
/*--------------------------------------Loading the data for the Basket Start---------------------------------------*/
      function renderBasket() {
        const basket = JSON.parse(localStorage.getItem('basket')) || [];
        const basketItemsDiv = document.getElementById('basket-items');
        basketItemsDiv.innerHTML = '';
/*--------------------------------------Loading the data for the Basket End---------------------------------------*/
/*--------------------------------------Total, Subtotal and Basket Items Start---------------------------------------*/
        let subtotal = 0;
        basket.forEach((item, index) => {
          subtotal += item.price * item.quantity;

          basketItemsDiv.innerHTML += `
            <div class="basket-item">
              <img src="${item.img}" alt="Item">
              <div class="item-info">
                <h3>${item.name}</h3>
                <p>Size: ${item.size}</p>
                <select class="qty-select" data-index="${index}">
                  ${[...Array(10).keys()].map(i => `<option ${item.quantity === i+1 ? 'selected' : ''}>${i+1}</option>`).join('')}
                </select>
              </div>
              <div class="item-price">£${(item.price * item.quantity).toFixed(2)}</div>
              <div class="remove-btn" data-index="${index}"><i class="fa fa-trash"></i></div>
            </div>
          `;
        });

        document.getElementById('subtotal').innerText = `£${subtotal.toFixed(2)}`;
        document.getElementById('total').innerText = `£${subtotal.toFixed(2)}`;
/*--------------------------------------Total, Subtotal and Basket Items End---------------------------------------*/
/*--------------------------------------Adjust Item Quantities (Including Removing Items) Start---------------------------------------*/
        document.querySelectorAll('.qty-select').forEach(select => {
          select.addEventListener('change', (e) => {
            const idx = e.target.getAttribute('data-index');
            basket[idx].quantity = parseInt(e.target.value);
            localStorage.setItem('basket', JSON.stringify(basket));
            renderBasket();
          });
        });

        document.querySelectorAll('.remove-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const idx = e.currentTarget.getAttribute('data-index');
            basket.splice(idx, 1);
            localStorage.setItem('basket', JSON.stringify(basket));
            renderBasket();
          });
        });
      }
/*--------------------------------------Adjust Item Quantities (Including Removing Items) End---------------------------------------*/
      renderBasket();
/*--------------------------------------Basket Java Script End---------------------------------------*/
  </script>
</body>
</html>
<!--------------------------------------BASKET PAGE END--------------------------------------->

